---
phase: 8
plan: 2
type: implementation
wave: 1
depends_on: [8.1]
files_modified:
  - src/routes/notifications.js
  - src/services/notificationPrefs.js
  - src/repositories/notificationPrefs.js
  - migrations/015_create_notification_prefs.sql
requirements:
  - TF-09
must_haves:
  - Per-user notification preferences
  - Channel toggles: in-app, email, push
  - Event type granularity (task_assigned, comment_added, etc.)
---

# Plan 8.2: Notification Preferences API

## Objective
Build API for users to configure notification preferences by channel and event type.

## Tasks
1. Create notification_preferences table migration
2. Build preferences CRUD endpoints
3. Implement preference resolution logic (user > project > global defaults)
4. Add preference checking to notification dispatch pipeline
