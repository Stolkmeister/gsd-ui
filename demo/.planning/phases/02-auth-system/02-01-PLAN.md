---
phase: 2
plan: 1
type: implementation
wave: 1
depends_on: [1.3]
files_modified:
  - src/middleware/auth.js
  - src/services/auth.js
  - src/routes/auth.js
  - src/utils/jwt.js
requirements:
  - TF-03
must_haves:
  - JWT access tokens with 15m expiry
  - Refresh token rotation with family detection
  - Secure httpOnly cookie storage for refresh tokens
  - Login and register endpoints
---

# Plan 2.1: JWT Authentication

## Objective
Implement JWT-based authentication with access/refresh token pairs and secure token rotation.

## Tasks
1. Create JWT utility with sign/verify functions
2. Build auth service with login, register, refresh flows
3. Implement auth middleware for protected routes
4. Add refresh token rotation with reuse detection
5. Create auth routes: POST /auth/login, POST /auth/register, POST /auth/refresh
