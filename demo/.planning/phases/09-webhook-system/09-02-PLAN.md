---
phase: 9
plan: 2
type: implementation
wave: 1
depends_on: [9.1]
files_modified:
  - src/workers/webhookDelivery.js
  - src/services/webhookQueue.js
  - migrations/017_create_webhook_deliveries.sql
requirements:
  - TF-10
must_haves:
  - BullMQ delivery queue with exponential backoff retries
  - Delivery log with response status tracking
  - At-least-once delivery guarantee
  - Automatic disable after consecutive failures
---

# Plan 9.2: Delivery Queue with Retries

## Objective
Implement reliable webhook delivery with BullMQ, exponential backoff retries, and delivery logging.

## Tasks
1. Create webhook_deliveries table for delivery history
2. Build BullMQ worker for HTTP delivery with timeout
3. Implement exponential backoff: 1m, 5m, 30m, 2h, 24h
4. Add HMAC-SHA256 signature in X-TaskFlow-Signature header
5. Auto-disable webhook after 10 consecutive failures
